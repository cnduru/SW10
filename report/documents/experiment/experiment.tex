\chapter{Experiments}
In order to verify that the implemented countermeasures do indeed provide improved protection against bit flips, compared to unprotected code, experiments are needed. These are performed with the modelling tool UPPAAL, which is further described in \cref{chap:upp}. In this chapter, experimental results are presented to confirm that implementing code duplication, and call graph integrity countermeasures, \cref{sub:faultCounter}, makes Java code more secure, and not less. The experiments will be performed on an unmodified code from the \jc samples, shown in \cref{lst:exUnmod}. A bit flip inverts the comparison and the code in \cref{lst:exMod} is the result. The countermeasures are implemented on this, modified, code.
\begin{lstlisting}[label={lst:exUnmod}, caption=Purse code sample from the \jc samples.]
if (USERPIN.isValidated)
{
}
\end{lstlisting}

\begin{lstlisting}[label={lst:exMod}, caption=Purse code sample from the \jc samples with a bit flipped to change the comparison.]
if (!USERPIN.isValidated)
{
}
\end{lstlisting}
\section{Code Duplication}
\input{documents/experiment/codedup}
\section{Call Graph Integrity}
%Opstack pointer assumption is broken\\\\
%Inst fault og Instruction Differentiation\\\\
%Code dub\\\\
%Call graph integrity\\\\
